<!DOCTYPE html>
<html>
    <head>
        <title>他们试图融化一座冰山</title>
        <script src="https://d3js.org/d3.v5.min.js"></script>
        <script src="jquery.min.js"></script>
        <script src="https://public.flourish.studio/resources/embed.js"></script>
            <script src="intersection-observer.js"></script>
            <script src="stickyfill.min.js"></script>
            <script src="scrollama.min.js"></script>
            <script src="actions.js"></script>
        <style>
            .rectangle:hover{
                opacity:1;
            }
        </style>
        <style>
            @font-face {
                font-family: 'Tiempos';
                src: url('./font/Tiempos Text Regular.otf');
            }
            @font-face {
                font-family: 'Tiempos_bold';
                src: url('./font/Tiempos Text-Bold.otf');
            }
            @font-face {
                font-family: 'Gotham-Bold';
                src: url('./font/Gotham-Bold.otf');
            }
            @font-face {
                font-family: 'Gotham-Black';
                src: url('./font/Gotham-Black.otf');
            }
            #scrolly {
        position: relative;
        background-color: #ffffff;
        padding: 1rem;
      }

      article {
        position: relative;
        padding: 0;
        max-width: 20rem;
        margin: 0 auto;
        pointer-events: none;
      }

      figure {
        position: -webkit-sticky;
        position: sticky;
        left: 0;
        width: 100%;
        margin: 0;
        -webkit-transform: translate3d(0, 0, 0);
        -moz-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
        background-color: #8a8a8a;
      }

      figure p {
        text-align: bottom;
        padding: 1rem;
        position: absolute;
        top: 50%;
        left: 50%;
        -moz-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
        font-size: 8rem;
        font-weight: 900;
        color: #fff;
      }

      .step {
        margin: 0 auto 2rem auto;
        color: #000000;
        background-color: rgba(255, 255, 255, 0.5);
		font-size: 17px;
		line-height: 180%;
		padding: 2em;
		pointer-events: none;
        box-shadow:0px 0px  8px 3px #bcbcbc;
      }
	  
	  .invisible {
        visibility: hidden;
      }

      .step:last-child {
        margin-bottom: 0;
      }

      .step.is-active {
        background-color: rgba(255, 255, 255, 0.5);
        color: #000000;
      }   
        </style>
    </head>
    <body>
        
        
        
      <section id="outro"></section>
        
        <script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
        <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
        <script src="https://markup.standaard.be/extra/assets/extra/dslive/2020/scrolly/scrollama/stickyfill.min.js"></script>
        <script src="https://markup.standaard.be/extra/assets/extra/dslive/2020/scrolly/scrollama/scrollama.min.js"></script>
        <script>
            // using d3 for convenience
            var main = d3.select("main");
            var scrolly = main.select("#scrolly");
            var figure = scrolly.select("figure");
            var article = scrolly.select("article");
            var step = article.selectAll(".step");
      
            // initialize the scrollama
            var scroller = scrollama();
      
            // generic window resize listener event
            function handleResize() {
              // 1. update height of step elements
              var stepH = Math.floor(window.innerHeight * 0.75);
              // vaste hoogte toevoegen (heb ik weggehaald)
              // step.style("height", stepH + "px");
      
              var figureHeight = window.innerHeight / 2;
              var figureMarginTop = (window.innerHeight - figureHeight) / 2;
      
              figure
                .style("height", figureHeight + "px")
                .style("top", figureMarginTop + "px");
      
              // 3. tell scrollama to update new element dimensions
              scroller.resize();
            }
      
            // scrollama event handlers
            function handleStepEnter(response) {
              console.log(response);
              // response = { element, direction, index }
      
              // add color to current step only
              step.classed("is-active", function (d, i) {
                return i === response.index;
              });
              
             }

              // update graphic based on step
              //figure.select("p").text(response.index + 1);
              var iframe = document.querySelector("#scrolly iframe");

                iframe.src = iframe.src.replace(/#slide-.*/, "") + "#slide-" + response.index;
              figure.select("iframe").attr("src", function (d) {
                return (
                  "https://flo.uri.sh/story/935649/embed#slide-" + response.index
                  
                );
              });
            
      
            function setupStickyfill() {
              d3.selectAll(".sticky").each(function () {
                Stickyfill.add(this);
              });
            }
      
            function init() {
              setupStickyfill();
      
              // 1. force a resize on load to ensure proper dimensions are sent to scrollama
              handleResize();
      
              // 2. setup the scroller passing options
              // 		this will also initialize trigger observations
              // 3. bind scrollama event handlers (this can be chained like below)
              scroller
                .setup({
                  step: "#scrolly article .step",
                  offset: 0.5,
                  debug: false,
                })
                .onStepEnter(handleStepEnter);
      
              // setup resize event
              window.addEventListener("resize", handleResize);
            }
      
            // kick things off
            init();
          </script>
        </body>
      </html>
      

        <link rel="stylesheet" type="text/css" href="iceberg.css">
        <svg xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink" viewBox="0 130 1000 600" class="world">
            <defs>
                <linearGradient id="beam-mask-gradient" x1="170" y1="503.73" x2="170" y2="2.29" gradientUnits="userSpaceOnUse">
                    <stop offset="0" />
                    <stop offset="1" stop-color="#fff" />
                </linearGradient>
                <mask id="beam-mask" x="-50" y="-0.27" width="440" height="508" maskUnits="userSpaceOnUse">//阴影
                    <rect fill="url(#beam-mask-gradient)" x="-100" width="440" height="508" />
                </mask>
                <linearGradient id="beam-gradient" x1="123.73" y1="0" x2="187.2" y2="267.39" gradientUnits="userSpaceOnUse">
                    <stop offset="0" class="beam-gradient" stop-opacity="0.5" />
                    <stop offset="1" class="beam-gradient" stop-opacity="0.1" />
                </linearGradient>
                <symbol id="beam" data-name="beam" viewBox="0 0 306 505">
                    <polygon mask="url(#beam-mask)" fill="url(#beam-gradient)" points="79 505 0 505 227 0 306 0 79 505" />
                </symbol>
                <linearGradient id="sky-gradient" x1="500" y1="123.81" x2="500" y2="410.73" gradientUnits="userSpaceOnUse">
                    <stop offset="0" class="sky-dark" />
                    <stop offset="1" class="sky-bright" />
                </linearGradient>
                <linearGradient id="ocean-gradient" x1="499.5" y1="999.5" x2="499.5" y2="499.5" gradientUnits="userSpaceOnUse">
                    <stop offset="0" class="ocean-deep" stop-color="#306b98" />
                    <stop offset="0.85" class="ocean-shallow" stop-color="#9fc2ca" />
                </linearGradient>
                <clipPath id="world">
                    <circle id="clipPath" cx="500" cy="1000 " r="3000" />
                </clipPath>
                <clipPath id="waves">
                    <path class="wave" d="M1502,950H-500V632c115-3,147-58,250-58s145,58,250,58,147-58,250-58,145,58,250,58,147-58,250-58,145,58,250,58,147-58,250-58,145,58,250,58C1500,780,1502,950,1502,950Z" />
                </clipPath>
                <clipPath id="icebergClip">
                    <path class="wave reverse" class="cls-2" d="M-399,0H1603V504c-115,3-147,58-250,58s-145-58-250-58-147,58-250,58-145-58-250-58-147,58-250,58-145-58-250-58-147,58-250,58-145-58-250-58C-397,356-399,0-399,0Z" />
                </clipPath>
            </defs>
            <g clip-path="url(#world)">
                <rect fill="url(#sky-gradient)" width="3000" height="2000" />
                <rect class="ocean-surface" x="-800" y="445" width="3000" height="505" />
                <g clip-path="url(#icebergClip)">
                    <g id="iceBerg" class="ice-berg">
                        <path class="ice" d="M514 504L387 837l-5 14-66-110-25 3-100-282-2-4 2-2 2-3 114-203 18 50 26 17 47-73 47 84 23 83 41 55h5v38z" />
                        <path class="ice-shade" d="M372 803c-5-37-10-72-6-109s-17-59-28-87c-3-8 2-19-2-25-13-21-33-29-50-46-1-2-6 0-8-1-14-11-20-26-36-36s-3-13-4-21-4-4-8-7-2-4-3-4-23-9-34-14l-2 3-2 3v4l102 281 25-3 66 110 5-14c-3-12-13-22-15-34z" />
                        <path class="ice-dark" d="M399 244l-47 66 8 35 39-101zm-90 6l-28 82-27 12 55-94zm-17 495L189 463l4-10 99 292zm92 106l-92-149 46 44 46 105z" />
                    </g>
                </g>
                <g clip-path="url(#waves)">
                    <rect fill="url(#ocean-gradient)" x="-500" y="500" width="3000" height="2000" />
                    <use xlink:href="#iceBerg" opacity="0.15" />
                    <use class="beam" width="2000" height="505.47" transform="translate(217 485)" xlink:href="#beam" />
                    <use class="beam" width="2000" height="505.47" transform="translate(329 515) scale(0.74)" xlink:href="#beam" />
                    <use class="beam" width="2000" height="505.47" transform="translate(410 515) scale(0.58)" xlink:href="#beam" />
                    <use class="beam" width="2000" height="505.47" transform="translate(489 477) scale(0.74)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(641 515) scale(0.74)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(542 485) scale(0.93)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(478 485) scale(0.93)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(74 485) scale(0.93)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(299 525) scale(0.46)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(777 525) scale(0.46)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(-50 485) scale(0.84)" xlink:href="#beam" />
                    <use class="beam" width="306" height="505.47" transform="translate(93 500) scale(0.57)" xlink:href="#beam" />
                </g>
            </g>
        </svg>


        <div style="text-align:center;">
            <h1>寻找一种病的名字</h1>
            
            <div id="d3-container">
        </div>
        <script src="index.js"></script>
        

        
        <div style="text-align:left;">
            <h5>2014年，小陈发现自己的孩子不太对劲。女儿小琳一岁，在一场高烧后常常显得没精打采，总是不肯走路，要大人抱。</h5>
            <h5>小琳这种表现似乎只是因为身体发育慢。她出生的时候只有4.9斤，瘦瘦小小，远达不到平均标准。小陈一直担心女儿的身体健康和发育情况——她自己身体不好，害怕孩子也会像她一样。
            一直到2015年，小琳“不肯走路”的状态始终不见好转，小陈慢慢起了疑心，决定带孩子去医院看看。她给小琳假设了一个坏的可能：先天性疾病。她知道亲戚家的孩子一开始也只是被认为“发育慢”，后来却确诊了先天性疾病，因为送诊和用药都及时，现在症状有所缓解。如果她也能早点查出孩子是不是生病了的话，一切都还来得及。
            小陈首先带孩子去了当地的医院。打过镇定剂以后，小琳却一直睡不着，没法继续做检查。准备打第二针镇定的时候，医生来看情况，发现小孩已经缺氧了。</h5>
            <h5>小琳从那时候起就戴上了呼吸机，此后的六年里，她没再离开过这台机器。</h5>
            <h5>医生建议小琳转院到省会广州治疗，那里的医院水平更高，医生见得更多，能告诉小陈，她的孩子身上到底发生了什么。
            医生给出了一个完全出乎小陈意料的可能：他们怀疑，小琳可能是庞贝病患者。基因检测和酶活性检测结果佐证了这个判断（网站美化如果能做出这样的检测报告会更好），由于第十七号染色体发生突变，小琳体内缺乏酸性α-葡萄糖苷酶 (acid alpha-glucosidase)，糖原无法正常降解，也无法给肌肉供给营养。这是一种常染色体隐性遗传病，在国际上普遍被认为属于罕见病之一。
            </h5></div>
            <link charset="UTF-8" href="http://1.changshi1104.applinzi.com/Scrollamahalo_files/translateelement.css" rel="stylesheet" type="text/css"/>
            <main>
              <section id="scrolly">
                <figure style="height: 353px; top: 0px;">
                   
                    <iframe src='https://flo.uri.sh/story/935649/embed' title='Interactive or visual content' class='flourish-embed-iframe' frameborder='0' scrolling='no' style='width:100%;height:600px;' sandbox='allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation'></iframe><div style='width:100%!;margin-top:4px!important;text-align:right!important;'><a class='flourish-credit' href='https://public.flourish.studio/story/935649/?utm_source=embed&utm_campaign=story/935649' target='_top' style='text-decoration:none!important'> </a></div>
                    
                </figure>

                <article>
    
        
         
<div class='scrolly'>
 
    <!-- sticky graphic -->
    <figure class='sticky'>
            <!-- chart stuff in here -->
    </figure>

    <!-- step text -->
    <article>
            <div class='step' data-index='0'>
                    <p>Step text</p>
            </div>
            <!-- ...more steps -->
    </article>

</div>
<style>
    
</style>

            
          <div class="step invisible">
          </div>
          <div class="step">
            2021 年，庞贝氏罕见病关爱中心发起了中国庞贝病患者综合社会调研，寻找“冰川下的人。”<font color="#1da087"><b>它们大多位于东部及中部。</b></font>
          </div>
    	  <div class="step invisible">
          </div>
	      <div class="step invisible">
          </div>
          <div class="step">
            <font color="#1da087"><b>湖南、河北、山东与江苏等地披露的“癌症村”数量较多。</b></font> 其中，有相当数量位于淮河流域，或与之相邻。
          </div>
		  <div class="step invisible">
          </div>
		  <div class="step invisible">
          </div>
          <div class="step">
            很难判断“癌症村”背后的疾病集聚与污染事实何时出现。<font color="#1da087"><b>但在公共话语中，它们于2004-2013年间被集中披露。</b></font> 
          </div>
		  <div class="step invisible">
          </div>
		  <div class="step invisible">
          </div>
          <div class="step">
            <font color="#1da087"><b>披露方通常为电视、报纸、杂志等专业媒体。</b></font> 同时，民众在地方BBS等虚拟社区的发帖也被视为参考材料。两成“癌症村”有多个消息源予以佐证。
          </div>
		  <div class="step invisible">
          </div>
		  <div class="step invisible">
          </div>
          <div class="step">
            “癌症村”因何导致？除未提及或未知缘由的村落，<font color="#1da087"><b>多数材料将“癌症村”的出现归因为水污染；</b></font> 同时，另有个别被视为源于空气、水源与土壤的多重污染。
          </div>
		  <div class="step invisible">
          </div>
		  <div class="step invisible">
          </div>
          <div class="step">
            但“癌症村”是否的确与地方污染结为因果？意见较难统一。<font color="#1da087"><b>近七成“癌症村”仅为民众与媒体的单方申诉。</b></font> 
          </div>
		  <div class="step invisible">
          </div>
        </article>
    </section>

    <section id="outro"></section>
  </main>

  <!-- <div class='debug'></div> -->
  <script src="http://1.changshi1104.applinzi.com/Scrollamahalo_files/d3.min.js.%E4%B8%8B%E8%BD%BD"></script>
  <script src="http://1.changshi1104.applinzi.com/Scrollamahalo_files/intersection-observer.js.%E4%B8%8B%E8%BD%BD"></script>
  <script src="http://1.changshi1104.applinzi.com/Scrollamahalo_files/stickyfill.min.js.%E4%B8%8B%E8%BD%BD"></script>
  <script src="http://1.changshi1104.applinzi.com/Scrollamahalo_files/scrollama.min.js.%E4%B8%8B%E8%BD%BD"></script>
  <script>
       // using d3 for convenience
       var main = d3.select("main");
      var scrolly = main.select("#scrolly");
      var figure = scrolly.select("figure");
      var article = scrolly.select("article");
      var step = article.selectAll(".step");

      // initialize the scrollama
      var scroller = scrollama();

      // generic window resize listener event
      function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 0.75);
        step.style("height", 250 + "px");

        var figureHeight = window.innerHeight / 2;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;

        figure
          .style("height", figureHeight + "px")
          .style("top", 0 + "px");

        // 3. tell scrollama to update new element dimensions
        scroller.resize();
      }

      // scrollama event handlers
      function handleStepEnter(response) {
        console.log(response);
        // response = { element, direction, index }

        // add color to current step only
        step.classed("is-active", function(d, i) {
          return i === response.index;
        });

        // update graphic based on step
        figure.select("p").text(response.index + 1);
		
        var iframe = document.querySelector("#scrolly iframe");
        iframe.src = iframe.src.replace(/#slide-.*/, "") + "#slide-" + response.index;
        figure.select("iframe").attr("src", function (d) {
                return (
                  "https://flo.uri.sh/story/935649/embed#slide-" + response.index
                  
                );
        })
              
      }

      function setupStickyfill() {
        d3.selectAll(".sticky").each(function() {
          Stickyfill.add(this);
        });
      }

      function init() {
        setupStickyfill();

        // 1. force a resize on load to ensure proper dimensions are sent to scrollama
        handleResize();

        // 2. setup the scroller passing options
        // 		this will also initialize trigger observations
        // 3. bind scrollama event handlers (this can be chained like below)
        scroller
          .setup({
            step: "#scrolly article .step",
            offset: 0.5,
            debug: false
          })
          .onStepEnter(handleStepEnter);

        // setup resize event
        window.addEventListener("resize", handleResize);
      }

      // kick things off
      init();
    </script>
    </body>
</html>